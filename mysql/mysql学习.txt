mysql学习第13小结：

为什么mysql表数据删除一半，表文件大小不变？
	在从mysql5.6之前，数据库设置innodb_file_per_table=off，表的数据放在系统共享表空间，当你删除表中数据之后，其实并不是真的删除，而是将该条数据标记为删除，如果要在插入一条数据，则该位置有可能被复用。
	数据在innodb中是以页为单位存储的，如果整个数据页的数据被删除了，那整个数据也还是存在的，整个数据页在这个时候可以背心插入下的数据复用。
	
	所以说，delete命令并不会回收表空间，所以一般使用delete删除了一张表的数据，并不会使表文件大小减小。
	
	通常在增删改的过程中，数据页会在数据存储的时候在成空洞，就是说数据如果不是连续的，在创建索引存储的时候很容易就导致不连续的数据存储在不同的数据页，从而导致每一页的数据并不是都存在的，本来能存储5条数据的页，现在只存储了3条，另外的两个空间没有存储数据，造成数据页空洞。
	
	如何处理数据页空洞想象呢？
	重建一张和原表一样表结构的表。然后按照主键递增的顺序，把原表的数据一条条读出来在插入到新表中。在这里，通过新建数据表并把原表数据重新插入新表，是的新表数据索引更加紧凑，从而是的新表数据没有空洞。然后用新表替换原来的表就完成了收缩原表空间的作用。
	
	可以使用alter table A engine=InnoDB命令重建表。该命令执行流程是重建临时表、自动完成转存数据、交换表名、删除旧表操作。